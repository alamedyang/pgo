{% extends 'pgo/pgo_base.html' %}
{% load render_bundle from webpack_loader %}


{% block title %}
  {{ block.super }} - Good to Go
{% endblock title %}

{% block content %}
  <div class="good-to-go-wrapper row" style="height: 40rem; padding: 1rem;">
    <div class="col-md-5">
      <span class="glyphicon glyphicon-hourglass" aria-hidden="true"></span> One moment, please...
    </div>
  </div>
  <div class="good-to-go-wrapper row" hidden>
    <div class="good-to-go-form-wrapper col-md-5">
      <form id="good-to-go-form">
        <div class="row">
          <div class="col-xs-12">
            <select id="good-to-go-select-attacker" tabindex="1">
              <option value="-1" disabled selected>Select attacker</option>
              {% for data in pokemon_data %}
                <option value="{{ data.0 }}">{{ data.1 }} ({{ data.2 }} ATK)</option>
              {% endfor %}
            </select>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12">
            <select id="good-to-go-select-quick-move" tabindex="2">
              <option value="-1" disabled selected>Quick move</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12">
            <select id="good-to-go-select-cinematic-move" tabindex="3" disabled>
              <option value="-1" disabled selected>Cinematic move</option>
            </select>
          </div>
        </div>

        <div class="row good-to-go-atk-iv-weather-wrapper">
          <div class="col-xs-6">
            <select id="good-to-go-select-atk-iv" tabindex="4">
              {% for n in attack_iv_range %}
                <option value="{{ n }}">{{ n }} ATK</option>
              {% endfor %}
            </select>
          </div>

          <div class="col-xs-6">
            <div class="good-to-go-weather-condition-wrapper">
              <select id="good-to-go-select-weather-condition" tabindex="5">
                {% for data in weather_condition_data %}
                  <option value="{{ data.0 }}">{{ data.1 }}</option>
                {% endfor %}
              </select>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12">
            <input type="checkbox" id="current_raid_bosses" checked hidden>
            <button id="toggle_current_raid_bosses" type="button" class="btn btn-success good-to-go-checkbox-button" tabindex="5">
              Current and anticipated raid bosses
            </button>
          </div>
          <div class="col-xs-12">
            <input type="checkbox" id="past_raid_bosses" hidden>
            <button id="toggle_past_raid_bosses" type="button" class="btn btn-default good-to-go-checkbox-button" tabindex="6">
              Past raid bosses
            </button>
            <input type="checkbox" id="relevant_defenders" hidden>
            <button id="toggle_relevant_defenders" type="button" class="btn btn-default good-to-go-checkbox-button" tabindex="7" disabled>
              Relevant defenders
            </button>
          </div>
        </div>

        <input id="good_to_go_submit" type="submit" value="Submit" class="submit-button btn btn-primary" tabindex="10">
      </form>
    </div>
    <div class="col-md-7 good-to-go-text-wrapper">
      <p>
        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> This feature is in beta, expect significant additions to come soon.
      </p>
      <div class="good-to-go-summary-text">
        <p>
          Good to Go is a comprehensive breakpoint calculator used to quickly figure out if your pokemon can hit the final quick move breakpoint for all selected matchups.
        </p>
        <p>
          Select your pokemon and its ATK IV, adjust the moves if necessary, then choose what you want to check against.
        </p>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12">
      <div class="good-to-go-results"></div>
    </div>
  </div>
{% endblock content %}

{% block scripts %}
  {% render_bundle 'goodToGo' attrs='async' %}
  {{ block.super }}

  {% block generic %}
  {% endblock generic %}

  <script type="text/javascript">
    var initialData = {{ initial_data|safe }};
    window.pgoAPIURLs = {
      'move-list': "{% url 'api-pgo:move-list' %}",
      'good-to-go': "{% url 'api-pgo:good-to-go' %}",
    };
  </script>
{% endblock scripts %}
