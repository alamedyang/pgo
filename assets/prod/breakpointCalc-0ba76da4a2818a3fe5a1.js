(function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=7)})([function(n,e){!function(a,e){n.exports=e()}(this,function(){var a=Math.abs,b=Math.min,d=Math.floor,c=Math.max;return function(a){function e(i){if(t[i])return t[i].exports;var o=t[i]={exports:{},id:i,loaded:!1};return a[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=a,e.c=t,e.p='/assets/scripts/dist/',e(0)}([function(n,e,t){n.exports=t(1)},function(g,e,t){'use strict';function i(t){return t&&t.__esModule?t:{default:t}}function k(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function E(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)}function b(n,e){if(!(n instanceof e))throw new TypeError('Cannot call a class as a function')}var n=function(){function a(a,o){for(var t,n=0;n<o.length;n++)t=o[n],t.enumerable=t.enumerable||!1,t.configurable=!0,'value'in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),a=t(2),s=i(a),o=t(3),l=i(o),r=t(4),u=i(r),y=t(31),_=t(32);t(33);var p=function(){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'[data-choice]',t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(b(this,r),(0,_.isType)('String',e)){var i=document.querySelectorAll(e);if(1<i.length)for(var n,o=1;o<i.length;o++)n=i[o],new r(n,t)}var s={silent:!1,items:[],choices:[],renderChoiceLimit:-1,maxItemCount:-1,addItems:!0,removeItems:!0,removeItemButton:!1,editItems:!1,duplicateItems:!0,delimiter:',',paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:['label','value'],position:'auto',resetScrollPosition:!0,regexFilter:null,shouldSort:!0,shouldSortItems:!1,sortFilter:_.sortByAlpha,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:'auto',loadingText:'Loading...',noResultsText:'No results found',noChoicesText:'No choices to choose from',itemSelectText:'Press to select',addItemText:function(t){return'Press Enter to add <b>"'+(0,_.stripHTML)(t)+'"</b>'},maxItemText:function(t){return'Only '+t+' values can be added.'},itemComparer:function(n,e){return n===e},uniqueItemText:'Only unique values can be added.',classNames:{containerOuter:'choices',containerInner:'choices__inner',input:'choices__input',inputCloned:'choices__input--cloned',list:'choices__list',listItems:'choices__list--multiple',listSingle:'choices__list--single',listDropdown:'choices__list--dropdown',item:'choices__item',itemSelectable:'choices__item--selectable',itemDisabled:'choices__item--disabled',itemChoice:'choices__item--choice',placeholder:'choices__placeholder',group:'choices__group',groupHeading:'choices__heading',button:'choices__button',activeState:'is-active',focusState:'is-focused',openState:'is-open',disabledState:'is-disabled',highlightedState:'is-highlighted',hiddenState:'is-hidden',flippedState:'is-flipped',loadingState:'is-loading',noResults:'has-no-results',noChoices:'has-no-choices'},fuseOptions:{include:'score'},callbackOnInit:null,callbackOnCreateTemplates:null};if(this.idNames={itemChoice:'item-choice'},this.config=(0,_.extend)(s,t),'auto'!==this.config.renderSelectedChoices&&'always'!==this.config.renderSelectedChoices&&(this.config.silent||console.warn('renderSelectedChoices: Possible values are \'auto\' and \'always\'. Falling back to \'auto\'.'),this.config.renderSelectedChoices='auto'),this.store=new u.default(this.render),this.initialised=!1,this.currentState={},this.prevState={},this.currentValue='',this.element=e,this.passedElement=(0,_.isType)('String',e)?document.querySelector(e):e,!this.passedElement)return void(this.config.silent||console.error('Passed element not found'));this.isTextElement='text'===this.passedElement.type,this.isSelectOneElement='select-one'===this.passedElement.type,this.isSelectMultipleElement='select-multiple'===this.passedElement.type,this.isSelectElement=this.isSelectOneElement||this.isSelectMultipleElement,this.isValidElementType=this.isTextElement||this.isSelectElement,this.isIe11=navigator.userAgent.match(/Trident/)&&navigator.userAgent.match(/rv[ :]11/),this.isScrollingOnIe=!1,!0===this.config.shouldSortItems&&this.isSelectOneElement&&(this.config.silent||console.warn('shouldSortElements: Type of passed element is \'select-one\', falling back to false.')),this.highlightPosition=0,this.canSearch=this.config.searchEnabled,this.placeholder=!1,this.isSelectOneElement||(this.placeholder=!!this.config.placeholder&&(this.config.placeholderValue||this.passedElement.getAttribute('placeholder'))),this.presetChoices=this.config.choices,this.presetItems=this.config.items,this.passedElement.value&&(this.presetItems=this.presetItems.concat(this.passedElement.value.split(this.config.delimiter))),this.baseId=(0,_.generateId)(this.passedElement,'choices-'),this.render=this.render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this.wasTap=!0;var a='classList'in document.documentElement;a||this.config.silent||console.error('Choices: Your browser doesn\'t support Choices');var d=(0,_.isElement)(this.passedElement)&&this.isValidElementType;if(d){if('active'===this.passedElement.getAttribute('data-choice'))return;this.init()}else this.config.silent||console.error('Incompatible input passed')}return n(r,[{key:'init',value:function(){if(!0!==this.initialised){var t=this.config.callbackOnInit;this.initialised=!0,this._createTemplates(),this._createInput(),this.store.subscribe(this.render),this.render(),this._addEventListeners(),t&&(0,_.isType)('Function',t)&&t.call(this)}}},{key:'destroy',value:function(){if(!1!==this.initialised){this._removeEventListeners(),this.passedElement.classList.remove(this.config.classNames.input,this.config.classNames.hiddenState),this.passedElement.removeAttribute('tabindex');var t=this.passedElement.getAttribute('data-choice-orig-style');!!t?(this.passedElement.removeAttribute('data-choice-orig-style'),this.passedElement.setAttribute('style',t)):this.passedElement.removeAttribute('style'),this.passedElement.removeAttribute('aria-hidden'),this.passedElement.removeAttribute('data-choice'),this.passedElement.value=this.passedElement.value,this.containerOuter.parentNode.insertBefore(this.passedElement,this.containerOuter),this.containerOuter.parentNode.removeChild(this.containerOuter),this.clearStore(),this.config.templates=null,this.initialised=!1}}},{key:'renderGroups',value:function(a,l,e){var r=this,t=e||document.createDocumentFragment(),n=this.config.sortFilter;return this.config.shouldSort&&a.sort(n),a.forEach(function(n){var e=l.filter(function(e){return r.isSelectOneElement?e.groupId===n.id:e.groupId===n.id&&!e.selected});if(1<=e.length){var a=r._getTemplate('choiceGroup',n);t.appendChild(a),r.renderChoices(e,t,!0)}}),t}},{key:'renderChoices',value:function(o,e){var v=this,t=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=e||document.createDocumentFragment(),s=this.config,r=s.renderSelectedChoices,a=s.searchResultLimit,c=s.renderChoiceLimit,l=this.isSearching?_.sortByScore:this.config.sortFilter,h=function(a){var e='auto'!==r||v.isSelectOneElement||!a.selected;if(e){var t=v._getTemplate('choice',a);i.appendChild(t)}},u=o;'auto'!==r||this.isSelectOneElement||(u=o.filter(function(t){return!t.selected}));var d=u.reduce(function(n,e){return e.placeholder?n.placeholderChoices.push(e):n.normalChoices.push(e),n},{placeholderChoices:[],normalChoices:[]}),f=d.placeholderChoices,p=d.normalChoices;(this.config.shouldSort||this.isSearching)&&p.sort(l);var m=u.length,g=[].concat(E(f),E(p));this.isSearching?m=a:0<c&&!t&&(m=c);for(var y=0;y<m;y++)g[y]&&h(g[y]);return i}},{key:'renderItems',value:function(a){var l=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,t=e||document.createDocumentFragment();if(this.config.shouldSortItems&&!this.isSelectOneElement&&a.sort(this.config.sortFilter),this.isTextElement){var n=this.store.getItemsReducedToValues(a),i=n.join(this.config.delimiter);this.passedElement.setAttribute('value',i),this.passedElement.value=i}else{var o=document.createDocumentFragment();a.forEach(function(t){var e=l._getTemplate('option',t);o.appendChild(e)}),this.passedElement.innerHTML='',this.passedElement.appendChild(o)}return a.forEach(function(n){var e=l._getTemplate('item',n);t.appendChild(e)}),t}},{key:'render',value:function(){if(!this.store.isLoading()&&(this.currentState=this.store.getState(),this.currentState!==this.prevState)){if((this.currentState.choices!==this.prevState.choices||this.currentState.groups!==this.prevState.groups||this.currentState.items!==this.prevState.items)&&this.isSelectElement){var l=this.store.getGroupsFilteredByActive(),e=this.store.getChoicesFilteredByActive(),t=document.createDocumentFragment();this.choiceList.innerHTML='',this.config.resetScrollPosition&&(this.choiceList.scrollTop=0),1<=l.length&&!0!==this.isSearching?t=this.renderGroups(l,e,t):1<=e.length&&(t=this.renderChoices(e,t));var i=this.store.getItemsFilteredByActive(),n=this._canAddItem(i,this.input.value);if(t.childNodes&&0<t.childNodes.length)n.response?(this.choiceList.appendChild(t),this._highlightChoice()):this.choiceList.appendChild(this._getTemplate('notice',n.notice));else{var s,o;this.isSearching?(o=(0,_.isType)('Function',this.config.noResultsText)?this.config.noResultsText():this.config.noResultsText,s=this._getTemplate('notice',o,'no-results')):(o=(0,_.isType)('Function',this.config.noChoicesText)?this.config.noChoicesText():this.config.noChoicesText,s=this._getTemplate('notice',o,'no-choices')),this.choiceList.appendChild(s)}}if(this.currentState.items!==this.prevState.items){var r=this.store.getItemsFilteredByActive();if(this.itemList.innerHTML='',r&&r){var a=this.renderItems(r);a.childNodes&&this.itemList.appendChild(a)}}this.prevState=this.currentState}}},{key:'highlightItem',value:function(a){var o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(!a)return this;var t=a.id,l=a.groupId,n=0<=l?this.store.getGroupById(l):null;return this.store.dispatch((0,y.highlightItem)(t,!0)),o&&(n&&n.value?(0,_.triggerEvent)(this.passedElement,'highlightItem',{id:t,value:a.value,label:a.label,groupValue:n.value}):(0,_.triggerEvent)(this.passedElement,'highlightItem',{id:t,value:a.value,label:a.label})),this}},{key:'unhighlightItem',value:function(a){if(!a)return this;var o=a.id,s=a.groupId,i=0<=s?this.store.getGroupById(s):null;return this.store.dispatch((0,y.highlightItem)(o,!1)),i&&i.value?(0,_.triggerEvent)(this.passedElement,'unhighlightItem',{id:o,value:a.value,label:a.label,groupValue:i.value}):(0,_.triggerEvent)(this.passedElement,'unhighlightItem',{id:o,value:a.value,label:a.label}),this}},{key:'highlightAll',value:function(){var n=this,e=this.store.getItems();return e.forEach(function(e){n.highlightItem(e)}),this}},{key:'unhighlightAll',value:function(){var n=this,e=this.store.getItems();return e.forEach(function(e){n.unhighlightItem(e)}),this}},{key:'removeItemsByValue',value:function(n){var a=this;if(!n||!(0,_.isType)('String',n))return this;var t=this.store.getItemsFilteredByActive();return t.forEach(function(e){e.value===n&&a._removeItem(e)}),this}},{key:'removeActiveItems',value:function(n){var e=this,t=this.store.getItemsFilteredByActive();return t.forEach(function(t){t.active&&n!==t.id&&e._removeItem(t)}),this}},{key:'removeHighlightedItems',value:function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.store.getItemsFilteredByActive();return t.forEach(function(t){t.highlighted&&t.active&&(n._removeItem(t),e&&n._triggerChange(t.value))}),this}},{key:'showDropdown',value:function(){var a=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=document.body,t=document.documentElement,i=c(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight);this.containerOuter.classList.add(this.config.classNames.openState),this.containerOuter.setAttribute('aria-expanded','true'),this.dropdown.classList.add(this.config.classNames.activeState),this.dropdown.setAttribute('aria-expanded','true');var n=this.dropdown.getBoundingClientRect(),s=Math.ceil(n.top+window.scrollY+this.dropdown.offsetHeight),o=!1;return'auto'===this.config.position?o=s>=i:'top'===this.config.position&&(o=!0),o&&this.containerOuter.classList.add(this.config.classNames.flippedState),a&&this.canSearch&&document.activeElement!==this.input&&this.input.focus(),(0,_.triggerEvent)(this.passedElement,'showDropdown',{}),this}},{key:'hideDropdown',value:function(){var n=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=this.containerOuter.classList.contains(this.config.classNames.flippedState);return this.containerOuter.classList.remove(this.config.classNames.openState),this.containerOuter.setAttribute('aria-expanded','false'),this.dropdown.classList.remove(this.config.classNames.activeState),this.dropdown.setAttribute('aria-expanded','false'),e&&this.containerOuter.classList.remove(this.config.classNames.flippedState),n&&this.canSearch&&document.activeElement===this.input&&this.input.blur(),(0,_.triggerEvent)(this.passedElement,'hideDropdown',{}),this}},{key:'toggleDropdown',value:function(){var t=this.dropdown.classList.contains(this.config.classNames.activeState);return t?this.hideDropdown():this.showDropdown(!0),this}},{key:'getValue',value:function(){var a=this,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.store.getItemsFilteredByActive(),o=[];return t.forEach(function(t){a.isTextElement?o.push(e?t.value:t):t.active&&o.push(e?t.value:t)}),this.isSelectOneElement?o[0]:o}},{key:'setValue',value:function(a){var o=this;if(!0===this.initialised){var e=[].concat(E(a)),t=function(t){var e=(0,_.getType)(t);if('Object'===e){if(!t.value)return;o.isTextElement?o._addItem(t.value,t.label,t.id,void 0,t.customProperties,t.placeholder):o._addChoice(t.value,t.label,!0,!1,-1,t.customProperties,t.placeholder)}else'String'===e&&(o.isTextElement?o._addItem(t):o._addChoice(t,t,!0,!1,-1,null))};1<e.length?e.forEach(function(n){t(n)}):t(e[0])}return this}},{key:'setValueByChoice',value:function(a){var o=this;if(!this.isTextElement){var t=this.store.getChoices(),e=(0,_.isType)('Array',a)?a:[a];e.forEach(function(a){var e=t.find(function(e){return o.config.itemComparer(e.value,a)});e?e.selected?o.config.silent||console.warn('Attempting to select choice already selected'):o._addItem(e.value,e.label,e.id,e.groupId,e.customProperties,e.placeholder,e.keyCode):o.config.silent||console.warn('Attempting to select choice that does not exist')})}return this}},{key:'setChoices',value:function(a,o,l){var i=this,e=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(!0===this.initialised&&this.isSelectElement){if(!(0,_.isType)('Array',a)||!o)return this;e&&this._clearChoices(),this._setLoading(!0),a&&a.length&&(this.containerOuter.classList.remove(this.config.classNames.loadingState),a.forEach(function(t){t.choices?i._addGroup(t,t.id||null,o,l):i._addChoice(t[o],t[l],t.selected,t.disabled,void 0,t.customProperties,t.placeholder)})),this._setLoading(!1)}return this}},{key:'clearStore',value:function(){return this.store.dispatch((0,y.clearAll)()),this}},{key:'clearInput',value:function(){return this.input.value&&(this.input.value=''),this.isSelectOneElement||this._setInputWidth(),!this.isTextElement&&this.config.searchEnabled&&(this.isSearching=!1,this.store.dispatch((0,y.activateChoices)(!0))),this}},{key:'enable',value:function(){if(this.initialised){this.passedElement.disabled=!1;var t=this.containerOuter.classList.contains(this.config.classNames.disabledState);t&&(this._addEventListeners(),this.passedElement.removeAttribute('disabled'),this.input.removeAttribute('disabled'),this.containerOuter.classList.remove(this.config.classNames.disabledState),this.containerOuter.removeAttribute('aria-disabled'),this.isSelectOneElement&&this.containerOuter.setAttribute('tabindex','0'))}return this}},{key:'disable',value:function(){if(this.initialised){this.passedElement.disabled=!0;var t=!this.containerOuter.classList.contains(this.config.classNames.disabledState);t&&(this._removeEventListeners(),this.passedElement.setAttribute('disabled',''),this.input.setAttribute('disabled',''),this.containerOuter.classList.add(this.config.classNames.disabledState),this.containerOuter.setAttribute('aria-disabled','true'),this.isSelectOneElement&&this.containerOuter.setAttribute('tabindex','-1'))}return this}},{key:'ajax',value:function(n){var e=this;return!0===this.initialised&&this.isSelectElement&&(requestAnimationFrame(function(){e._handleLoadingState(!0)}),n(this._ajaxCallback())),this}},{key:'_triggerChange',value:function(t){t&&(0,_.triggerEvent)(this.passedElement,'change',{value:t})}},{key:'_handleButtonAction',value:function(a,e){if(a&&e&&this.config.removeItems&&this.config.removeItemButton){var t=e.parentNode.getAttribute('data-id'),i=a.find(function(n){return n.id===parseInt(t,10)});this._removeItem(i),this._triggerChange(i.value),this.isSelectOneElement&&this._selectPlaceholderChoice()}}},{key:'_selectPlaceholderChoice',value:function(){var t=this.store.getPlaceholderChoice();t&&(this._addItem(t.value,t.label,t.id,t.groupId,null,t.placeholder),this._triggerChange(t.value))}},{key:'_handleItemAction',value:function(a,e){var t=this,i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(a&&e&&this.config.removeItems&&!this.isSelectOneElement){var n=e.getAttribute('data-id');a.forEach(function(a){a.id!==parseInt(n,10)||a.highlighted?i||a.highlighted&&t.unhighlightItem(a):t.highlightItem(a)}),document.activeElement!==this.input&&this.input.focus()}}},{key:'_handleChoiceAction',value:function(a,e){if(a&&e){var t=e.getAttribute('data-id'),i=this.store.getChoiceById(t),l=a[0]&&a[0].keyCode?a[0].keyCode:null,s=this.dropdown.classList.contains(this.config.classNames.activeState);if(i.keyCode=l,(0,_.triggerEvent)(this.passedElement,'choice',{choice:i}),i&&!i.selected&&!i.disabled){var o=this._canAddItem(a,i.value);o.response&&(this._addItem(i.value,i.label,i.id,i.groupId,i.customProperties,i.placeholder,i.keyCode),this._triggerChange(i.value))}this.clearInput(),s&&this.isSelectOneElement&&(this.hideDropdown(),this.containerOuter.focus())}}},{key:'_handleBackspace',value:function(n){if(this.config.removeItems&&n){var e=n[n.length-1],t=n.some(function(t){return t.highlighted});this.config.editItems&&!t&&e?(this.input.value=e.value,this._setInputWidth(),this._removeItem(e),this._triggerChange(e.value)):(t||this.highlightItem(e,!1),this.removeHighlightedItems(!0))}}},{key:'_canAddItem',value:function(a,o){var e=!0,t=(0,_.isType)('Function',this.config.addItemText)?this.config.addItemText(o):this.config.addItemText;(this.isSelectMultipleElement||this.isTextElement)&&0<this.config.maxItemCount&&this.config.maxItemCount<=a.length&&(e=!1,t=(0,_.isType)('Function',this.config.maxItemText)?this.config.maxItemText(this.config.maxItemCount):this.config.maxItemText),this.isTextElement&&this.config.addItems&&e&&this.config.regexFilter&&(e=this._regexFilter(o));var l=!a.some(function(t){return(0,_.isType)('String',o)?t.value===o.trim():t.value===o});return l||this.config.duplicateItems||this.isSelectOneElement||!e||(e=!1,t=(0,_.isType)('Function',this.config.uniqueItemText)?this.config.uniqueItemText(o):this.config.uniqueItemText),{response:e,notice:t}}},{key:'_handleLoadingState',value:function(){var n=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=this.itemList.querySelector('.'+this.config.classNames.placeholder);n?(this.containerOuter.classList.add(this.config.classNames.loadingState),this.containerOuter.setAttribute('aria-busy','true'),this.isSelectOneElement?e?e.innerHTML=this.config.loadingText:(e=this._getTemplate('placeholder',this.config.loadingText),this.itemList.appendChild(e)):this.input.placeholder=this.config.loadingText):(this.containerOuter.classList.remove(this.config.classNames.loadingState),this.isSelectOneElement?e.innerHTML=this.placeholder||'':this.input.placeholder=this.placeholder||'')}},{key:'_ajaxCallback',value:function(){var a=this;return function(e,o,i){if(e&&o){var t=(0,_.isType)('Object',e)?[e]:e;t&&(0,_.isType)('Array',t)&&t.length?(a._handleLoadingState(!1),a._setLoading(!0),t.forEach(function(e){if(e.choices){var t=e.id||null;a._addGroup(e,t,o,i)}else a._addChoice(e[o],e[i],e.selected,e.disabled,void 0,e.customProperties,e.placeholder)}),a._setLoading(!1),a.isSelectOneElement&&a._selectPlaceholderChoice()):a._handleLoadingState(!1),a.containerOuter.removeAttribute('aria-busy')}}}},{key:'_searchChoices',value:function(l){var e=(0,_.isType)('String',l)?l.trim():l,t=(0,_.isType)('String',this.currentValue)?this.currentValue.trim():this.currentValue;if(1<=e.length&&e!==t+' '){var i=this.store.getSearchableChoices(),n=(0,_.isType)('Array',this.config.searchFields)?this.config.searchFields:[this.config.searchFields],d=Object.assign(this.config.fuseOptions,{keys:n}),r=new s.default(i,d),a=r.search(e);return this.currentValue=e,this.highlightPosition=0,this.isSearching=!0,this.store.dispatch((0,y.filterChoices)(a)),a.length}return 0}},{key:'_handleSearch',value:function(a){if(a){var o=this.store.getChoices(),t=o.some(function(t){return!t.active});if(this.input===document.activeElement)if(a&&a.length>=this.config.searchFloor){var i=0;this.config.searchChoices&&(i=this._searchChoices(a)),(0,_.triggerEvent)(this.passedElement,'search',{value:a,resultCount:i})}else t&&(this.isSearching=!1,this.store.dispatch((0,y.activateChoices)(!0)))}}},{key:'_addEventListeners',value:function(){document.addEventListener('keyup',this._onKeyUp),document.addEventListener('keydown',this._onKeyDown),document.addEventListener('click',this._onClick),document.addEventListener('touchmove',this._onTouchMove),document.addEventListener('touchend',this._onTouchEnd),document.addEventListener('mousedown',this._onMouseDown),document.addEventListener('mouseover',this._onMouseOver),this.isSelectOneElement&&(this.containerOuter.addEventListener('focus',this._onFocus),this.containerOuter.addEventListener('blur',this._onBlur)),this.input.addEventListener('input',this._onInput),this.input.addEventListener('paste',this._onPaste),this.input.addEventListener('focus',this._onFocus),this.input.addEventListener('blur',this._onBlur)}},{key:'_removeEventListeners',value:function(){document.removeEventListener('keyup',this._onKeyUp),document.removeEventListener('keydown',this._onKeyDown),document.removeEventListener('click',this._onClick),document.removeEventListener('touchmove',this._onTouchMove),document.removeEventListener('touchend',this._onTouchEnd),document.removeEventListener('mousedown',this._onMouseDown),document.removeEventListener('mouseover',this._onMouseOver),this.isSelectOneElement&&(this.containerOuter.removeEventListener('focus',this._onFocus),this.containerOuter.removeEventListener('blur',this._onBlur)),this.input.removeEventListener('input',this._onInput),this.input.removeEventListener('paste',this._onPaste),this.input.removeEventListener('focus',this._onFocus),this.input.removeEventListener('blur',this._onBlur)}},{key:'_setInputWidth',value:function(){this.placeholder?this.input.value&&this.input.value.length>=this.placeholder.length/1.25&&(this.input.style.width=(0,_.getWidthOfInput)(this.input)):this.input.style.width=(0,_.getWidthOfInput)(this.input)}},{key:'_onKeyDown',value:function(u){var e,p=this;if(u.target===this.input||this.containerOuter.contains(u.target)){var i=u.target,n=this.store.getItemsFilteredByActive(),t=this.input===document.activeElement,h=this.dropdown.classList.contains(this.config.classNames.activeState),a=this.itemList&&this.itemList.children,o=String.fromCharCode(u.keyCode),s=13,l=40,d=33,c=34,g=u.ctrlKey||u.metaKey;this.isTextElement||!/[a-zA-Z0-9-_ ]/.test(o)||h||this.showDropdown(!0),this.canSearch=this.config.searchEnabled;var m=function(){g&&a&&(p.canSearch=!1,p.config.removeItems&&!p.input.value&&p.input===document.activeElement&&p.highlightAll())},v=function(){if(p.isTextElement&&i.value){var e=p.input.value,t=p._canAddItem(n,e);t.response&&(h&&p.hideDropdown(),p._addItem(e),p._triggerChange(e),p.clearInput())}if(i.hasAttribute('data-button')&&(p._handleButtonAction(n,i),u.preventDefault()),h){u.preventDefault();var a=p.dropdown.querySelector('.'+p.config.classNames.highlightedState);a&&(n[0]&&(n[0].keyCode=s),p._handleChoiceAction(n,a))}else p.isSelectOneElement&&(h||(p.showDropdown(!0),u.preventDefault()))},f=function(){h&&(p.toggleDropdown(),p.containerOuter.focus())},b=function(){if(h||p.isSelectOneElement){h||p.showDropdown(!0),p.canSearch=!1;var e,a=u.keyCode===l||u.keyCode===c?1:-1,t=u.metaKey||u.keyCode===c||u.keyCode===d;if(t)e=0<a?Array.from(p.dropdown.querySelectorAll('[data-choice-selectable]')).pop():p.dropdown.querySelector('[data-choice-selectable]');else{var n=p.dropdown.querySelector('.'+p.config.classNames.highlightedState);e=n?(0,_.getAdjacentEl)(n,'[data-choice-selectable]',a):p.dropdown.querySelector('[data-choice-selectable]')}e&&((0,_.isScrolledIntoView)(e,p.choiceList,a)||p._scrollToChoice(e,a),p._highlightChoice(e)),u.preventDefault()}},y=function(){!t||u.target.value||p.isSelectOneElement||(p._handleBackspace(n),u.preventDefault())},E=(e={},k(e,65,m),k(e,s,v),k(e,27,f),k(e,38,b),k(e,d,b),k(e,l,b),k(e,c,b),k(e,8,y),k(e,46,y),e);E[u.keyCode]&&E[u.keyCode]()}}},{key:'_onKeyUp',value:function(a){if(a.target===this.input){var e=this.input.value,t=this.store.getItemsFilteredByActive(),i=this._canAddItem(t,e);if(this.isTextElement){var n=this.dropdown.classList.contains(this.config.classNames.activeState);if(e){if(i.notice){var s=this._getTemplate('notice',i.notice);this.dropdown.innerHTML=s.outerHTML}!0===i.response?n||this.showDropdown():!i.notice&&n&&this.hideDropdown()}else n&&this.hideDropdown()}else{a.keyCode!==46&&a.keyCode!==8||a.target.value?this.canSearch&&i.response&&this._handleSearch(this.input.value):!this.isTextElement&&this.isSearching&&(this.isSearching=!1,this.store.dispatch((0,y.activateChoices)(!0)))}this.canSearch=this.config.searchEnabled}}},{key:'_onInput',value:function(){this.isSelectOneElement||this._setInputWidth()}},{key:'_onTouchMove',value:function(){!0===this.wasTap&&(this.wasTap=!1)}},{key:'_onTouchEnd',value:function(n){var e=n.target||n.touches[0].target,t=this.dropdown.classList.contains(this.config.classNames.activeState);!0===this.wasTap&&this.containerOuter.contains(e)&&(e!==this.containerOuter&&e!==this.containerInner||this.isSelectOneElement||(this.isTextElement?document.activeElement!==this.input&&this.input.focus():t||this.showDropdown(!0)),n.stopPropagation()),this.wasTap=!0}},{key:'_onMouseDown',value:function(a){var e=a.target;if(e===this.choiceList&&this.isIe11&&(this.isScrollingOnIe=!0),this.containerOuter.contains(e)&&e!==this.input){var t,i=this.store.getItemsFilteredByActive(),n=a.shiftKey;(t=(0,_.findAncestorByAttrName)(e,'data-button'))?this._handleButtonAction(i,t):(t=(0,_.findAncestorByAttrName)(e,'data-item'))?this._handleItemAction(i,t,n):(t=(0,_.findAncestorByAttrName)(e,'data-choice'))&&this._handleChoiceAction(i,t),a.preventDefault()}}},{key:'_onClick',value:function(a){var e=a.target,t=this.dropdown.classList.contains(this.config.classNames.activeState),i=this.store.getItemsFilteredByActive();if(this.containerOuter.contains(e))e.hasAttribute('data-button')&&this._handleButtonAction(i,e),t?this.isSelectOneElement&&e!==this.input&&!this.dropdown.contains(e)&&this.hideDropdown(!0):this.isTextElement?document.activeElement!==this.input&&this.input.focus():this.canSearch?this.showDropdown(!0):(this.showDropdown(),this.containerOuter.focus());else{var n=i.some(function(t){return t.highlighted});n&&this.unhighlightAll(),this.containerOuter.classList.remove(this.config.classNames.focusState),t&&this.hideDropdown()}}},{key:'_onMouseOver',value:function(t){(t.target===this.dropdown||this.dropdown.contains(t.target))&&t.target.hasAttribute('data-choice')&&this._highlightChoice(t.target)}},{key:'_onPaste',value:function(t){t.target!==this.input||this.config.paste||t.preventDefault()}},{key:'_onFocus',value:function(a){var e=this,t=a.target;if(this.containerOuter.contains(t)){var i=this.dropdown.classList.contains(this.config.classNames.activeState),n={text:function(){t===e.input&&e.containerOuter.classList.add(e.config.classNames.focusState)},"select-one":function(){e.containerOuter.classList.add(e.config.classNames.focusState),t===e.input&&(i||e.showDropdown())},"select-multiple":function(){t===e.input&&(e.containerOuter.classList.add(e.config.classNames.focusState),i||e.showDropdown(!0))}};n[this.passedElement.type]()}}},{key:'_onBlur',value:function(a){var e=this,t=a.target;if(this.containerOuter.contains(t)&&!this.isScrollingOnIe){var i=this.store.getItemsFilteredByActive(),n=this.dropdown.classList.contains(this.config.classNames.activeState),s=i.some(function(t){return t.highlighted}),o={text:function(){t===e.input&&(e.containerOuter.classList.remove(e.config.classNames.focusState),s&&e.unhighlightAll(),n&&e.hideDropdown())},"select-one":function(){e.containerOuter.classList.remove(e.config.classNames.focusState),t===e.containerOuter&&n&&!e.canSearch&&e.hideDropdown(),t===e.input&&n&&e.hideDropdown()},"select-multiple":function(){t===e.input&&(e.containerOuter.classList.remove(e.config.classNames.focusState),n&&e.hideDropdown(),s&&e.unhighlightAll())}};o[this.passedElement.type]()}else this.isScrollingOnIe=!1,this.input.focus()}},{key:'_regexFilter',value:function(n){if(!n)return!1;var a=this.config.regexFilter,t=new RegExp(a.source,'i');return t.test(n)}},{key:'_scrollToChoice',value:function(l,d){var t=this;if(l){var e=this.choiceList.offsetHeight,n=l.offsetHeight,i=l.offsetTop+n,o=this.choiceList.scrollTop+e,u=0<d?this.choiceList.scrollTop+i-o:l.offsetTop,a=function a(){var e,i,l=4,n=t.choiceList.scrollTop,s=!1;0<d?(e=(u-n)/l,i=1<e?e:1,t.choiceList.scrollTop=n+i,n<u&&(s=!0)):(e=(n-u)/l,i=1<e?e:1,t.choiceList.scrollTop=n-i,n>u&&(s=!0)),s&&requestAnimationFrame(function(e){a(e,u,d)})};requestAnimationFrame(function(t){a(t,u,d)})}}},{key:'_highlightChoice',value:function(){var a=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=Array.from(this.dropdown.querySelectorAll('[data-choice-selectable]')),i=e;if(t&&t.length){var n=Array.from(this.dropdown.querySelectorAll('.'+this.config.classNames.highlightedState));n.forEach(function(e){e.classList.remove(a.config.classNames.highlightedState),e.setAttribute('aria-selected','false')}),i?this.highlightPosition=t.indexOf(i):(i=t.length>this.highlightPosition?t[this.highlightPosition]:t[t.length-1],i||(i=t[0])),i.classList.add(this.config.classNames.highlightedState),i.setAttribute('aria-selected','true'),this.containerOuter.setAttribute('aria-activedescendant',i.id)}}},{key:'_addItem',value:function(p){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:-1,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,s=5<arguments.length&&void 0!==arguments[5]&&arguments[5],o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:null,r=(0,_.isType)('String',p)?p.trim():p,g=o,m=this.store.getItems(),l=e||r,v=parseInt(t,10)||-1,u=0<=i?this.store.getGroupById(i):null,d=m?m.length+1:1;return this.config.prependValue&&(r=this.config.prependValue+r.toString()),this.config.appendValue&&(r+=this.config.appendValue.toString()),this.store.dispatch((0,y.addItem)(r,l,d,v,i,n,s,g)),this.isSelectOneElement&&this.removeActiveItems(d),u&&u.value?(0,_.triggerEvent)(this.passedElement,'addItem',{id:d,value:r,label:l,groupValue:u.value,keyCode:g}):(0,_.triggerEvent)(this.passedElement,'addItem',{id:d,value:r,label:l,keyCode:g}),this}},{key:'_removeItem',value:function(a){if(!a||!(0,_.isType)('Object',a))return this;var l=a.id,d=a.value,c=a.label,u=a.choiceId,s=a.groupId,o=0<=s?this.store.getGroupById(s):null;return this.store.dispatch((0,y.removeItem)(l,u)),o&&o.value?(0,_.triggerEvent)(this.passedElement,'removeItem',{id:l,value:d,label:c,groupValue:o.value}):(0,_.triggerEvent)(this.passedElement,'removeItem',{id:l,value:d,label:c}),this}},{key:'_addChoice',value:function(d){var p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,t=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:-1,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,o=6<arguments.length&&void 0!==arguments[6]&&arguments[6],r=7<arguments.length&&void 0!==arguments[7]?arguments[7]:null;if('undefined'!=typeof d&&null!==d){var a=this.store.getChoices(),c=p||d,l=a?a.length+1:1,h=this.baseId+'-'+this.idNames.itemChoice+'-'+l;this.store.dispatch((0,y.addChoice)(d,c,l,n,i,h,s,o,r)),t&&this._addItem(d,c,l,void 0,s,o,r)}}},{key:'_clearChoices',value:function(){this.store.dispatch((0,y.clearChoices)())}},{key:'_addGroup',value:function(l,e){var c=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:'value',n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:'label',t=(0,_.isType)('Object',l)?l.choices:Array.from(l.getElementsByTagName('OPTION')),o=e?e:d(new Date().valueOf()*Math.random()),s=!!l.disabled&&l.disabled;t?(this.store.dispatch((0,y.addGroup)(l.label,o,!0,s)),t.forEach(function(a){var e=a.disabled||a.parentNode&&a.parentNode.disabled;c._addChoice(a[i],(0,_.isType)('Object',a)?a[n]:a.innerHTML,a.selected,e,o,a.customProperties,a.placeholder)})):this.store.dispatch((0,y.addGroup)(l.label,l.id,!1,l.disabled))}},{key:'_getTemplate',value:function(a){if(!a)return null;for(var o=this.config.templates,t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return o[a].apply(o,i)}},{key:'_createTemplates',value:function(){var a=this,s=this.config.classNames,e=this.config.callbackOnCreateTemplates,t={};e&&(0,_.isType)('Function',e)&&(t=e.call(this,_.strToEl)),this.config.templates=(0,_.extend)({containerOuter:function(e){return(0,_.strToEl)('\n          <div\n            class="'+s.containerOuter+'"\n            '+(a.isSelectElement?a.config.searchEnabled?'role="combobox" aria-autocomplete="list"':'role="listbox"':'')+'\n            data-type="'+a.passedElement.type+'"\n            '+(a.isSelectOneElement?'tabindex="0"':'')+'\n            aria-haspopup="true"\n            aria-expanded="false"\n            dir="'+e+'"\n            >\n          </div>\n        ')},containerInner:function(){return(0,_.strToEl)('\n          <div class="'+s.containerInner+'"></div>\n        ')},itemList:function(){var e,t=(0,l.default)(s.list,(e={},k(e,s.listSingle,a.isSelectOneElement),k(e,s.listItems,!a.isSelectOneElement),e));return(0,_.strToEl)('\n          <div class="'+t+'"></div>\n        ')},placeholder:function(t){return(0,_.strToEl)('\n          <div class="'+s.placeholder+'">\n            '+t+'\n          </div>\n        ')},item:function(e){var t,n=(0,l.default)(s.item,(t={},k(t,s.highlightedState,e.highlighted),k(t,s.itemSelectable,!e.highlighted),k(t,s.placeholder,e.placeholder),t));if(a.config.removeItemButton){var i;return n=(0,l.default)(s.item,(i={},k(i,s.highlightedState,e.highlighted),k(i,s.itemSelectable,!e.disabled),k(i,s.placeholder,e.placeholder),i)),(0,_.strToEl)('\n            <div\n              class="'+n+'"\n              data-item\n              data-id="'+e.id+'"\n              data-value="'+e.value+'"\n              data-deletable\n              '+(e.active?'aria-selected="true"':'')+'\n              '+(e.disabled?'aria-disabled="true"':'')+'\n              >\n              '+e.label+'<!--\n           --><button\n                type="button"\n                class="'+s.button+'"\n                data-button\n                aria-label="Remove item: \''+e.value+'\'"\n                >\n                Remove item\n              </button>\n            </div>\n          ')}return(0,_.strToEl)('\n          <div\n            class="'+n+'"\n            data-item\n            data-id="'+e.id+'"\n            data-value="'+e.value+'"\n            '+(e.active?'aria-selected="true"':'')+'\n            '+(e.disabled?'aria-disabled="true"':'')+'\n            >\n            '+e.label+'\n          </div>\n        ')},choiceList:function(){return(0,_.strToEl)('\n          <div\n            class="'+s.list+'"\n            dir="ltr"\n            role="listbox"\n            '+(a.isSelectOneElement?'':'aria-multiselectable="true"')+'\n            >\n          </div>\n        ')},choiceGroup:function(t){var e=(0,l.default)(s.group,k({},s.itemDisabled,t.disabled));return(0,_.strToEl)('\n          <div\n            class="'+e+'"\n            data-group\n            data-id="'+t.id+'"\n            data-value="'+t.value+'"\n            role="group"\n            '+(t.disabled?'aria-disabled="true"':'')+'\n            >\n            <div class="'+s.groupHeading+'">'+t.value+'</div>\n          </div>\n        ')},choice:function(e){var t,n=(0,l.default)(s.item,s.itemChoice,(t={},k(t,s.itemDisabled,e.disabled),k(t,s.itemSelectable,!e.disabled),k(t,s.placeholder,e.placeholder),t));return(0,_.strToEl)('\n          <div\n            class="'+n+'"\n            data-select-text="'+a.config.itemSelectText+'"\n            data-choice\n            data-id="'+e.id+'"\n            data-value="'+e.value+'"\n            '+(e.disabled?'data-choice-disabled aria-disabled="true"':'data-choice-selectable')+'\n            id="'+e.elementId+'"\n            '+(0<e.groupId?'role="treeitem"':'role="option"')+'\n            >\n            '+e.label+'\n          </div>\n        ')},input:function(){var t=(0,l.default)(s.input,s.inputCloned);return(0,_.strToEl)('\n          <input\n            type="text"\n            class="'+t+'"\n            autocomplete="off"\n            autocapitalize="off"\n            spellcheck="false"\n            role="textbox"\n            aria-autocomplete="list"\n            >\n        ')},dropdown:function(){var t=(0,l.default)(s.list,s.listDropdown);return(0,_.strToEl)('\n          <div\n            class="'+t+'"\n            aria-expanded="false"\n            >\n          </div>\n        ')},notice:function(t){var e,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'',n=(0,l.default)(s.item,s.itemChoice,(e={},k(e,s.noResults,'no-results'===a),k(e,s.noChoices,'no-choices'===a),e));return(0,_.strToEl)('\n          <div class="'+n+'">\n            '+t+'\n          </div>\n        ')},option:function(t){return(0,_.strToEl)('\n          <option value="'+t.value+'" selected>'+t.label+'</option>\n        ')}},t)}},{key:'_setLoading',value:function(t){this.store.dispatch((0,y.setIsLoading)(t))}},{key:'_createInput',value:function(){var p=this,e=this.passedElement.getAttribute('dir')||'ltr',t=this._getTemplate('containerOuter',e),i=this._getTemplate('containerInner'),n=this._getTemplate('itemList'),s=this._getTemplate('choiceList'),o=this._getTemplate('input'),r=this._getTemplate('dropdown');this.containerOuter=t,this.containerInner=i,this.input=o,this.choiceList=s,this.itemList=n,this.dropdown=r,this.passedElement.classList.add(this.config.classNames.input,this.config.classNames.hiddenState),this.passedElement.tabIndex='-1';var a=this.passedElement.getAttribute('style');if(!!a&&this.passedElement.setAttribute('data-choice-orig-style',a),this.passedElement.setAttribute('style','display:none;'),this.passedElement.setAttribute('aria-hidden','true'),this.passedElement.setAttribute('data-choice','active'),(0,_.wrap)(this.passedElement,i),(0,_.wrap)(i,t),this.isSelectOneElement?o.placeholder=this.config.searchPlaceholderValue||'':this.placeholder&&(o.placeholder=this.placeholder,o.style.width=(0,_.getWidthOfInput)(o)),this.config.addItems||this.disable(),t.appendChild(i),t.appendChild(r),i.appendChild(n),this.isTextElement||r.appendChild(s),this.isSelectMultipleElement||this.isTextElement?i.appendChild(o):this.canSearch&&r.insertBefore(o,r.firstChild),this.isSelectElement){var g=Array.from(this.passedElement.getElementsByTagName('OPTGROUP'));if(this.highlightPosition=0,this.isSearching=!1,this._setLoading(!0),g&&g.length)g.forEach(function(e){p._addGroup(e,e.id||null)});else{var l=Array.from(this.passedElement.options),h=this.config.sortFilter,u=this.presetChoices;l.forEach(function(t){u.push({value:t.value,label:t.innerHTML,selected:t.selected,disabled:t.disabled||t.parentNode.disabled,placeholder:t.hasAttribute('placeholder')})}),this.config.shouldSort&&u.sort(h);var d=u.some(function(t){return t.selected});u.forEach(function(e,t){if(p.isSelectOneElement){var a=d||!d&&0<t;p._addChoice(e.value,e.label,!a||e.selected,!!a&&e.disabled,void 0,e.customProperties,e.placeholder)}else p._addChoice(e.value,e.label,e.selected,e.disabled,void 0,e.customProperties,e.placeholder)})}this._setLoading(!1)}else this.isTextElement&&this.presetItems.forEach(function(e){var t=(0,_.getType)(e);if('Object'===t){if(!e.value)return;p._addItem(e.value,e.label,e.id,void 0,e.customProperties,e.placeholder)}else'String'===t&&p._addItem(e)})}}]),r}();g.exports=p},function(t){!function(){'use strict';function T(){console.log.apply(console,arguments)}function e(n,e){for(var t in this.list=n,this.options=e=e||{},o)o.hasOwnProperty(t)&&('boolean'==typeof o[t]?this.options[t]=t in e?e[t]:o[t]:this.options[t]=e[t]||o[t])}function u(o,e,s){var i,n,r,a,d,l;if(!e)s.push(o);else if(r=e.indexOf('.'),-1===r?i=e:(i=e.slice(0,r),n=e.slice(r+1)),a=o[i],null!==a&&void 0!==a)if(!(n||'string'!=typeof a&&'number'!=typeof a))s.push(a);else if(k(a))for(d=0,l=a.length;d<l;d++)u(a[d],n,s);else n&&u(a,n,s);return s}function k(t){return'[object Array]'===Object.prototype.toString.call(t)}function n(a,e){e=e||{},this.options=e,this.options.location=e.location||n.defaultOptions.location,this.options.distance='distance'in e?e.distance:n.defaultOptions.distance,this.options.threshold='threshold'in e?e.threshold:n.defaultOptions.threshold,this.options.maxPatternLength=e.maxPatternLength||n.defaultOptions.maxPatternLength,this.pattern=e.caseSensitive?a:a.toLowerCase(),this.patternLen=a.length,this.patternLen<=this.options.maxPatternLength&&(this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet())}var o={id:null,caseSensitive:!1,include:[],shouldSort:!0,searchFn:n,sortFn:function(n,e){return n.score-e.score},getFn:u,keys:[],verbose:!1,tokenize:!1,matchAllTokens:!1,tokenSeparator:/ +/g,minMatchCharLength:1,findAllMatches:!1};e.VERSION='2.7.3',e.prototype.set=function(t){return this.list=t,t},e.prototype.search=function(n){this.options.verbose&&T('\nSearch term:',n,'\n'),this.pattern=n,this.results=[],this.resultMap={},this._keyMap=null,this._prepareSearchers(),this._startSearch(),this._computeScore(),this._sort();var e=this._format();return e},e.prototype._prepareSearchers=function(){var a=this.options,e=this.pattern,t=a.searchFn,i=e.split(a.tokenSeparator),n=0,s=i.length;if(this.options.tokenize)for(this.tokenSearchers=[];n<s;n++)this.tokenSearchers.push(new t(i[n],a));this.fullSeacher=new t(e,a)},e.prototype._startSearch=function(){var d,u,p,i,n=this.options,s=n.getFn,o=this.list,r=o.length,a=this.options.keys,c=a.length,l=null;if('string'==typeof o[0])for(p=0;p<r;p++)this._analyze('',o[p],p,p);else for(this._keyMap={},p=0;p<r;p++)for(l=o[p],i=0;i<c;i++){if(d=a[i],'string'!=typeof d){if(u=1-d.weight||1,this._keyMap[d.name]={weight:u},0>=d.weight||1<d.weight)throw new Error('Key weight has to be > 0 and <= 1');d=d.name}else this._keyMap[d]={weight:1};this._analyze(d,s(l,d,[]),l,p)}},e.prototype._analyze=function(i,o,C,L){var s,r,a,c,l,A,u,d,f,p,v,m,g,y,b,E=this.options,_=!1;if(void 0!==o&&null!==o){r=[];var S=0;if('string'==typeof o){if(s=o.split(E.tokenSeparator),E.verbose&&T('---------\nKey:',i),this.options.tokenize){for(y=0;y<this.tokenSearchers.length;y++){for(d=this.tokenSearchers[y],E.verbose&&T('Pattern:',d.pattern),f=[],m=!1,b=0;b<s.length;b++){p=s[b],v=d.search(p);var I={};v.isMatch?(I[p]=v.score,_=!0,m=!0,r.push(v.score)):(I[p]=1,this.options.matchAllTokens||r.push(1)),f.push(I)}m&&S++,E.verbose&&T('Token scores:',f)}for(c=r[0],A=r.length,y=1;y<A;y++)c+=r[y];c/=A,E.verbose&&T('Token score average:',c)}u=this.fullSeacher.search(o),E.verbose&&T('Full text score:',u.score),l=u.score,void 0!==c&&(l=(l+c)/2),E.verbose&&T('Score average:',l),g=!this.options.tokenize||!this.options.matchAllTokens||S>=this.tokenSearchers.length,E.verbose&&T('Check Matches',g),(_||u.isMatch)&&g&&(a=this.resultMap[L],a?a.output.push({key:i,score:l,matchedIndices:u.matchedIndices}):(this.resultMap[L]={item:C,output:[{key:i,score:l,matchedIndices:u.matchedIndices}]},this.results.push(this.resultMap[L])))}else if(k(o))for(y=0;y<o.length;y++)this._analyze(i,o[y],C,L)}},e.prototype._computeScore=function(){var i,e,t,n,s,o,r,a,d,l=this._keyMap,c=this.results;for(this.options.verbose&&T('\n\nComputing score:\n'),i=0;i<c.length;i++){for(t=0,n=c[i].output,s=n.length,a=1,e=0;e<s;e++)o=n[e].score,r=l?l[n[e].key].weight:1,d=o*r,1===r?(t+=d,n[e].nScore=d):a=b(a,d);c[i].score=1===a?t/s:a,this.options.verbose&&T(c[i])}},e.prototype._sort=function(){var t=this.options;t.shouldSort&&(t.verbose&&T('\n\nSorting....'),this.results.sort(t.sortFn))},e.prototype._format=function(){var i,e,t,n,s=this.options,o=s.getFn,r=[],a=this.results,d=s.include;for(s.verbose&&T('\n\nOutput:\n\n',a),t=s.id?function(t){a[t].item=o(a[t].item,s.id,[])[0]}:function(){},n=function(l){var e,t,i,n,s,o=a[l];if(0<d.length){if(e={item:o.item},-1!==d.indexOf('matches'))for(i=o.output,e.matches=[],t=0;t<i.length;t++)n=i[t],s={indices:n.matchedIndices},n.key&&(s.key=n.key),e.matches.push(s);-1!==d.indexOf('score')&&(e.score=a[l].score)}else e=o.item;return e},i=0,e=a.length;i<e;i++)t(i),r.push(n(i));return r},n.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},n.prototype._calculatePatternAlphabet=function(){var n={},e=0;for(e=0;e<this.patternLen;e++)n[this.pattern.charAt(e)]=0;for(e=0;e<this.patternLen;e++)n[this.pattern.charAt(e)]|=1<<this.pattern.length-e-1;return n},n.prototype._bitapScore=function(o,e){var t=o/this.patternLen,i=a(this.options.location-e);return this.options.distance?t+i/this.options.distance:i?1:t},n.prototype.search=function(T){var e,t,i,n,s,o,r,a,k,l,h,u,C,f,p,v,m,g,L,A,E,O,S,I=this.options;if(T=I.caseSensitive?T:T.toLowerCase(),this.pattern===T)return{isMatch:!0,score:0,matchedIndices:[[0,T.length-1]]};if(this.patternLen>I.maxPatternLength){if(g=T.match(new RegExp(this.pattern.replace(I.tokenSeparator,'|'))),L=!!g)for(E=[],e=0,O=g.length;e<O;e++)S=g[e],E.push([T.indexOf(S),S.length-1]);return{isMatch:L,score:L?.5:1,matchedIndices:E}}for(n=I.findAllMatches,s=I.location,i=T.length,o=I.threshold,r=T.indexOf(this.pattern,s),A=[],e=0;e<i;e++)A[e]=0;for(-1!=r&&(o=b(this._bitapScore(0,r),o),r=T.lastIndexOf(this.pattern,s+this.patternLen),-1!=r&&(o=b(this._bitapScore(0,r),o))),r=-1,v=1,m=[],l=this.patternLen+i,e=0;e<this.patternLen;e++){for(a=0,k=l;a<k;)this._bitapScore(e,s+k)<=o?a=k:l=k,k=d((l-a)/2+a);for(l=k,h=c(1,s-k+1),u=n?i:b(s+k,i)+this.patternLen,C=Array(u+2),C[u+1]=(1<<e)-1,t=u;t>=h;t--)if(p=this.patternAlphabet[T.charAt(t-1)],p&&(A[t-1]=1),C[t]=(1|C[t+1]<<1)&p,0!==e&&(C[t]|=1|(f[t+1]|f[t])<<1|f[t+1]),C[t]&this.matchmask&&(v=this._bitapScore(e,t-1),v<=o)){if(o=v,r=t-1,m.push(r),r<=s)break;h=c(1,2*s-r)}if(this._bitapScore(e+1,s)>o)break;f=C}return E=this._getMatchedIndices(A),{isMatch:0<=r,score:0===v?.001:v,matchedIndices:E}},n.prototype._getMatchedIndices=function(a){for(var e,t=[],i=-1,n=-1,s=0,o=a.length;s<o;s++)e=a[s],e&&-1===i?i=s:e||-1===i||(n=s-1,n-i+1>=this.options.minMatchCharLength&&t.push([i,n]),i=-1);return a[s-1]&&s-1-i+1>=this.options.minMatchCharLength&&t.push([i,s-1]),t},t.exports=e}(this)},function(a,l){var t,n;!function(){'use strict';function d(){for(var a,o=[],e=0;e<arguments.length;e++)if(a=arguments[e],a){var t=typeof a;if('string'==t||'number'==t)o.push(a);else if(Array.isArray(a))o.push(d.apply(null,a));else if('object'==t)for(var s in a)i.call(a,s)&&a[s]&&o.push(s)}return o.join(' ')}var i={}.hasOwnProperty;'undefined'!=typeof a&&a.exports?a.exports=d:(t=[],n=function(){return d}.apply(l,t),!(void 0!==n&&(a.exports=n)))}()},function(n,e,t){'use strict';function i(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)}function s(n,e){if(!(n instanceof e))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(e,'__esModule',{value:!0});var o=function(){function a(a,o){for(var t,n=0;n<o.length;n++)t=o[n],t.enumerable=t.enumerable||!1,t.configurable=!0,'value'in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),r=t(5),a=t(26),d=function(t){return t&&t.__esModule?t:{default:t}}(a),l=function(){function t(){s(this,t),this.store=(0,r.createStore)(d.default,window.devToolsExtension?window.devToolsExtension():void 0)}return o(t,[{key:'getState',value:function(){return this.store.getState()}},{key:'dispatch',value:function(t){this.store.dispatch(t)}},{key:'subscribe',value:function(t){this.store.subscribe(t)}},{key:'isLoading',value:function(){var t=this.store.getState();return t.general.loading}},{key:'getItems',value:function(){var t=this.store.getState();return t.items}},{key:'getItemsFilteredByActive',value:function(){var n=this.getItems(),e=n.filter(function(t){return!0===t.active},[]);return e}},{key:'getItemsReducedToValues',value:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.getItems(),e=n.reduce(function(n,e){return n.push(e.value),n},[]);return e}},{key:'getChoices',value:function(){var t=this.store.getState();return t.choices}},{key:'getChoicesFilteredByActive',value:function(){var n=this.getChoices(),e=n.filter(function(t){return!0===t.active});return e}},{key:'getChoicesFilteredBySelectable',value:function(){var n=this.getChoices(),e=n.filter(function(t){return!0!==t.disabled});return e}},{key:'getSearchableChoices',value:function(){var t=this.getChoicesFilteredBySelectable();return t.filter(function(t){return!0!==t.placeholder})}},{key:'getChoiceById',value:function(n){if(n){var e=this.getChoicesFilteredByActive(),t=e.find(function(e){return e.id===parseInt(n,10)});return t}return!1}},{key:'getGroups',value:function(){var t=this.store.getState();return t.groups}},{key:'getGroupsFilteredByActive',value:function(){var n=this.getGroups(),a=this.getChoices(),e=n.filter(function(t){var e=!0===t.active&&!1===t.disabled,i=a.some(function(t){return!0===t.active&&!1===t.disabled});return e&&i},[]);return e}},{key:'getGroupById',value:function(n){var e=this.getGroups(),t=e.find(function(e){return e.id===n});return t}},{key:'getPlaceholderChoice',value:function(){var n=this.getChoices(),e=[].concat(i(n)).reverse().find(function(t){return!0===t.placeholder});return e}}]),t}();e.default=l,n.exports=l},function(g,e,t){'use strict';function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.compose=e.applyMiddleware=e.bindActionCreators=e.combineReducers=e.createStore=void 0;var n=t(6),s=i(n),o=t(21),r=i(o),a=t(23),c=i(a),l=t(24),h=i(l),u=t(25),d=i(u),m=t(22);i(m),e.createStore=s.default,e.combineReducers=r.default,e.bindActionCreators=c.default,e.applyMiddleware=h.default,e.compose=d.default},function(d,e,t){'use strict';function i(t){return t&&t.__esModule?t:{default:t}}function n(s,l,r){function d(){m===v&&(m=v.slice())}function b(){return p}function E(n){if('function'!=typeof n)throw new Error('Expected listener to be a function.');var a=!0;return d(),m.push(n),function(){if(a){a=!1,d();var e=m.indexOf(n);m.splice(e,1)}}}function _(a){if(!(0,o.default)(a))throw new Error('Actions must be plain objects. Use custom middleware for async actions.');if('undefined'==typeof a.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(g)throw new Error('Reducers may not dispatch actions.');try{g=!0,p=f(p,a)}finally{g=!1}for(var e,n=v=m,t=0;t<n.length;t++)e=n[t],e();return a}var S;if('function'==typeof l&&'undefined'==typeof r&&(r=l,l=void 0),'undefined'!=typeof r){if('function'!=typeof r)throw new Error('Expected the enhancer to be a function.');return r(n)(s,l)}if('function'!=typeof s)throw new Error('Expected the reducer to be a function.');var f=s,p=l,v=[],m=v,g=!1;return _({type:c.INIT}),S={dispatch:_,subscribe:E,getState:b,replaceReducer:function(t){if('function'!=typeof t)throw new Error('Expected the nextReducer to be a function.');f=t,_({type:c.INIT})}},S[u.default]=function(){var t;return t={subscribe:function(t){function a(){t.next&&t.next(b())}if('object'!=typeof t)throw new TypeError('Expected the observer to be an object.');a();var i=E(a);return{unsubscribe:i}}},t[u.default]=function(){return this},t},S}e.__esModule=!0,e.ActionTypes=void 0,e.default=n;var s=t(7),o=i(s),r=t(17),u=i(r),c=e.ActionTypes={INIT:'@@redux/INIT'}},function(n,e,t){var a=t(8),s=t(14),o=t(16),i=Function.prototype,r=Object.prototype,l=i.toString,c=r.hasOwnProperty,u=l.call(Object);n.exports=function(n){if(!o(n)||a(n)!='[object Object]')return!1;var e=s(n);if(null===e)return!0;var t=c.call(e,'constructor')&&e.constructor;return'function'==typeof t&&t instanceof t&&l.call(t)==u}},function(d,e,t){function i(t){return null==t?void 0===t?a:r:c&&c in Object(t)?s(t):o(t)}var n=t(9),s=t(12),o=t(13),r='[object Null]',a='[object Undefined]',c=n?n.toStringTag:void 0;d.exports=i},function(a,e,t){var i=t(10),n=i.Symbol;a.exports=n},function(a,e,t){var i=t(11),n='object'==typeof self&&self&&self.Object===Object&&self,s=i||n||Function('return this')();a.exports=s},function(n,e){(function(e){var a='object'==typeof e&&e&&e.Object===Object&&e;n.exports=a}).call(e,function(){return this}())},function(l,e,t){function i(n){var e=o.call(n,a),t=n[a];try{n[a]=void 0}catch(t){}var i=r.call(n);return e?n[a]=t:delete n[a],i}var n=t(9),s=Object.prototype,o=s.hasOwnProperty,r=s.toString,a=n?n.toStringTag:void 0;l.exports=i},function(t){var e=Object.prototype,n=e.toString;t.exports=function(t){return n.call(t)}},function(a,e,t){var i=t(15),n=i(Object.getPrototypeOf,Object);a.exports=n},function(t){t.exports=function(n,e){return function(t){return n(e(t))}}},function(t){t.exports=function(t){return null!=t&&'object'==typeof t}},function(n,e,t){n.exports=t(18)},function(n,s,t){(function(i,l){'use strict';Object.defineProperty(s,'__esModule',{value:!0});var n,o=t(20),r=function(t){return t&&t.__esModule?t:{default:t}}(o);n='undefined'==typeof self?'undefined'==typeof window?'undefined'==typeof i?l:i:window:self;var a=(0,r.default)(n);s.default=a}).call(s,function(){return this}(),t(19)(n))},function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(n,e){'use strict';function t(n){var e,t=n.Symbol;return'function'==typeof t?t.observable?e=t.observable:(e=t('observable'),t.observable=e):e='@@observable',e}Object.defineProperty(e,'__esModule',{value:!0}),e.default=t},function(d,e,t){'use strict';function i(t){return t&&t.__esModule?t:{default:t}}function n(a,e){var t=e&&e.type,i=t&&'"'+t.toString()+'"'||'an action';return'Given action '+i+', reducer "'+a+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function s(a){Object.keys(a).forEach(function(e){var t=a[e],i=t(void 0,{type:r.ActionTypes.INIT});if('undefined'==typeof i)throw new Error('Reducer "'+e+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don\'t want to set a value for this reducer, you can use null instead of undefined.');var o='@@redux/PROBE_UNKNOWN_ACTION_'+Math.random().toString(36).substring(7).split('').join('.');if('undefined'==typeof t(void 0,{type:o}))throw new Error('Reducer "'+e+'" returned undefined when probed with a random type. '+('Don\'t try to handle '+r.ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.'))})}function o(o){for(var e,l=Object.keys(o),p={},t=0;t<l.length;t++)e=l[t],'function'==typeof o[e]&&(p[e]=o[e]);var i,c=Object.keys(p);try{s(p)}catch(t){i=t}return function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(i)throw i;for(var t=!1,s={},o=0;o<c.length;o++){var r=c[o],l=p[r],h=a[r],u=l(h,e);if('undefined'==typeof u){var g=n(r,e);throw new Error(g)}s[r]=u,t=t||u!==h}return t?s:a}}e.__esModule=!0,e.default=o;var r=t(6),a=t(7),c=(i(a),t(22));i(c)},function(n,e){'use strict';e.__esModule=!0,e.default=function(t){'undefined'!=typeof console&&'function'==typeof console.error&&console.error(t);try{throw new Error(t)}catch(t){}}},function(a,e){'use strict';function l(n,e){return function(){return e(n.apply(void 0,arguments))}}function t(i,d){if('function'==typeof i)return l(i,d);if('object'!=typeof i||null===i)throw new Error('bindActionCreators expected an object or a function, instead received '+(null===i?'null':typeof i)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var t=Object.keys(i),c={},s=0;s<t.length;s++){var o=t[s],r=i[o];'function'==typeof r&&(c[o]=l(r,d))}return c}e.__esModule=!0,e.default=t},function(n,e,t){'use strict';e.__esModule=!0;var d=Object.assign||function(a){for(var e,i=1;i<arguments.length;i++)for(var t in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a};e.default=function(){for(var n=arguments.length,a=Array(n),e=0;e<n;e++)a[e]=arguments[e];return function(t){return function(e,i,n){var s=t(e,i,n),r=s.dispatch,u=[],l={getState:s.getState,dispatch:function(t){return r(t)}};return u=a.map(function(t){return t(l)}),r=o.default.apply(void 0,u)(s.dispatch),d({},s,{dispatch:r})}}};var i=t(25),o=function(t){return t&&t.__esModule?t:{default:t}}(i)},function(n,e){'use strict';function t(){for(var n=arguments.length,e=Array(n),t=0;t<n;t++)e[t]=arguments[t];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(n,e){return function(){return n(e.apply(void 0,arguments))}})}e.__esModule=!0,e.default=t},function(p,e,t){'use strict';function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,'__esModule',{value:!0});var n=t(5),s=t(27),o=i(s),r=t(28),a=i(r),c=t(29),l=i(c),h=t(30),u=i(h),d=(0,n.combineReducers)({items:o.default,groups:a.default,choices:l.default,general:u.default});e.default=function(n,e){var t=n;return'CLEAR_ALL'===e.type&&(t=void 0),d(t,e)}},function(n,e){'use strict';function a(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)}Object.defineProperty(e,'__esModule',{value:!0});e.default=function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],o=arguments[1];switch(o.type){case'ADD_ITEM':var e=[].concat(a(i),[{id:o.id,choiceId:o.choiceId,groupId:o.groupId,value:o.value,label:o.label,active:!0,highlighted:!1,customProperties:o.customProperties,placeholder:o.placeholder||!1,keyCode:null}]);return e.map(function(t){return t.highlighted&&(t.highlighted=!1),t});case'REMOVE_ITEM':return i.map(function(t){return t.id===o.id&&(t.active=!1),t});case'HIGHLIGHT_ITEM':return i.map(function(t){return t.id===o.id&&(t.highlighted=o.highlighted),t});default:return i;}}},function(n,e){'use strict';function a(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)}Object.defineProperty(e,'__esModule',{value:!0});e.default=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];switch(e.type){case'ADD_GROUP':return[].concat(a(n),[{id:e.id,value:e.value,active:e.active,disabled:e.disabled}]);case'CLEAR_CHOICES':return n.groups=[];default:return n;}}},function(n,e){'use strict';function a(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)}Object.defineProperty(e,'__esModule',{value:!0});e.default=function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],l=arguments[1];switch(l.type){case'ADD_CHOICE':return[].concat(a(i),[{id:l.id,elementId:l.elementId,groupId:l.groupId,value:l.value,label:l.label||l.value,disabled:l.disabled||!1,selected:!1,active:!0,score:9999,customProperties:l.customProperties,placeholder:l.placeholder||!1,keyCode:null}]);case'ADD_ITEM':var e=i;return l.activateOptions&&(e=i.map(function(t){return t.active=l.active,t})),-1<l.choiceId&&(e=i.map(function(t){return t.id===parseInt(l.choiceId,10)&&(t.selected=!0),t})),e;case'REMOVE_ITEM':return-1<l.choiceId?i.map(function(t){return t.id===parseInt(l.choiceId,10)&&(t.selected=!1),t}):i;case'FILTER_CHOICES':var t=l.results,n=i.map(function(n){return n.active=t.some(function(e){return e.item.id===n.id&&(n.score=e.score,!0)}),n});return n;case'ACTIVATE_CHOICES':return i.map(function(t){return t.active=l.active,t});case'CLEAR_CHOICES':return i.choices=[];default:return i;}}},function(n,e){'use strict';Object.defineProperty(e,'__esModule',{value:!0});e.default=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{loading:!1},e=arguments[1];switch(e.type){case'LOADING':return{loading:e.isLoading};default:return n;}}},function(n,e){'use strict';Object.defineProperty(e,'__esModule',{value:!0}),e.addItem=function(l,d,c,u,p,h,g,m){return{type:'ADD_ITEM',value:l,label:d,id:c,choiceId:u,groupId:p,customProperties:h,placeholder:g,keyCode:m}},e.removeItem=function(n,a){return{type:'REMOVE_ITEM',id:n,choiceId:a}},e.highlightItem=function(n,a){return{type:'HIGHLIGHT_ITEM',id:n,highlighted:a}},e.addChoice=function(l,d,u,p,h,g,m,v,f){return{type:'ADD_CHOICE',value:l,label:d,id:u,groupId:p,disabled:h,elementId:g,customProperties:m,placeholder:v,keyCode:f}},e.filterChoices=function(t){return{type:'FILTER_CHOICES',results:t}},e.activateChoices=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{type:'ACTIVATE_CHOICES',active:t}},e.clearChoices=function(){return{type:'CLEAR_CHOICES'}},e.addGroup=function(a,o,s,l){return{type:'ADD_GROUP',value:a,id:o,active:s,disabled:l}},e.clearAll=function(){return{type:'CLEAR_ALL'}},e.setIsLoading=function(t){return{type:'LOADING',isLoading:t}}},function(u,e){'use strict';Object.defineProperty(e,'__esModule',{value:!0});var t='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},p=(e.capitalise=function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},e.generateChars=function(o){for(var e,n='',t=0;t<o;t++)e=a(0,36),n+=e.toString(36);return n}),n=(e.generateId=function(n,e){var t=n.id||n.name&&n.name+'-'+p(2)||p(4);return t=t.replace(/(:|\.|\[|\]|,)/g,''),t=e+t},e.getType=function(t){return Object.prototype.toString.call(t).slice(8,-1)}),h=e.isType=function(a,e){var t=n(e);return void 0!==e&&null!==e&&t===a},o=(e.isNode=function(n){return'object'===('undefined'==typeof Node?'undefined':t(Node))?n instanceof Node:n&&'object'===('undefined'==typeof n?'undefined':t(n))&&'number'==typeof n.nodeType&&'string'==typeof n.nodeName},e.isElement=function(n){return'object'===('undefined'==typeof HTMLElement?'undefined':t(HTMLElement))?n instanceof HTMLElement:n&&'object'===('undefined'==typeof n?'undefined':t(n))&&null!==n&&1===n.nodeType&&'string'==typeof n.nodeName},e.extend=function a(){for(var e,o={},t=arguments.length,i=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(h('Object',e[t])?o[t]=a(!0,o[t],e[t]):o[t]=e[t])},n=0;n<t;n++)e=arguments[n],h('Object',e)&&i(e);return o},e.whichTransitionEvent=function(){var n,e=document.createElement('fakeelement'),t={transition:'transitionend',OTransition:'oTransitionEnd',MozTransition:'transitionend',WebkitTransition:'webkitTransitionEnd'};for(n in t)if(void 0!==e.style[n])return t[n]},e.whichAnimationEvent=function(){var n,e=document.createElement('fakeelement'),t={animation:'animationend',OAnimation:'oAnimationEnd',MozAnimation:'animationend',WebkitAnimation:'webkitAnimationEnd'};for(n in t)if(void 0!==e.style[n])return t[n]}),r=(e.getParentsUntil=function(a,e,t){for(var i=[];a&&a!==document;a=a.parentNode){if(e){var n=e.charAt(0);if('.'===n&&a.classList.contains(e.substr(1)))break;if('#'===n&&a.id===e.substr(1))break;if('['===n&&a.hasAttribute(e.substr(1,e.length-1)))break;if(a.tagName.toLowerCase()===e)break}if(t){var s=t.charAt(0);'.'===s&&a.classList.contains(t.substr(1))&&i.push(a),'#'===s&&a.id===t.substr(1)&&i.push(a),'['===s&&a.hasAttribute(t.substr(1,t.length-1))&&i.push(a),a.tagName.toLowerCase()===t&&i.push(a)}else i.push(a)}return 0===i.length?null:i},e.wrap=function(n,e){return e=e||document.createElement('div'),n.nextSibling?n.parentNode.insertBefore(e,n.nextSibling):n.parentNode.appendChild(e),e.appendChild(n)},e.getSiblings=function(n){for(var e=[],t=n.parentNode.firstChild;t;t=t.nextSibling)1===t.nodeType&&t!==n&&e.push(t);return e},e.findAncestor=function(n,e){for(;(n=n.parentElement)&&!n.classList.contains(e););return n},e.findAncestorByAttrName=function(n,e){for(var t=n;t;){if(t.hasAttribute(e))return t;t=t.parentElement}return null},e.debounce=function(l,e,t){var i;return function(){var r=this,s=arguments,o=t&&!i;clearTimeout(i),i=setTimeout(function(){i=null,t||l.apply(r,s)},e),o&&l.apply(r,s)}},e.getElemDistance=function(n){var e=0;if(n.offsetParent)do e+=n.offsetTop,n=n.offsetParent;while(n);return 0<=e?e:0},e.getElementOffset=function(n,e){var t=e;return 1<t&&(t=1),0<t&&(t=0),c(n.offsetHeight*t)},e.getAdjacentEl=function(a,e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(a&&e){var i=a.parentNode.parentNode,n=Array.from(i.querySelectorAll(e)),s=n.indexOf(a),o=0<t?1:-1;return n[s+o]}},e.getScrollPosition=function(t){return'bottom'===t?c((window.scrollY||window.pageYOffset)+(window.innerHeight||document.documentElement.clientHeight)):window.scrollY||window.pageYOffset},e.isInView=function(n,e,t){return this.getScrollPosition(e)>this.getElemDistance(n)+this.getElementOffset(n,t)},e.isScrolledIntoView=function(a,e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(a){var i;return i=0<t?e.scrollTop+e.offsetHeight>=a.offsetTop+a.offsetHeight:a.offsetTop>=e.scrollTop}},e.stripHTML=function(t){return t.replace(/&/g,'&amp;').replace(/>/g,'&rt;').replace(/</g,'&lt;').replace(/"/g,'&quot;')}),a=(e.addAnimation=function(a,e){var t=o();a.classList.add(e),a.addEventListener(t,function i(){a.classList.remove(e),a.removeEventListener(t,i,!1)},!1)},e.getRandomNumber=function(n,e){return d(Math.random()*(e-n)+n)}),g=e.strToEl=function(){var t=document.createElement('div');return function(e){var a,n=e.trim();for(t.innerHTML=n,a=t.children[0];t.firstChild;)t.removeChild(t.firstChild);return a}}();e.getWidthOfInput=function(a){var e=a.value||a.placeholder,t=a.offsetWidth;if(e){var i=g('<span>'+r(e)+'</span>');if(i.style.position='absolute',i.style.padding='0',i.style.top='-9999px',i.style.left='-9999px',i.style.width='auto',i.style.whiteSpace='pre',document.body.contains(a)&&window.getComputedStyle){var n=window.getComputedStyle(a);n&&(i.style.fontSize=n.fontSize,i.style.fontFamily=n.fontFamily,i.style.fontWeight=n.fontWeight,i.style.fontStyle=n.fontStyle,i.style.letterSpacing=n.letterSpacing,i.style.textTransform=n.textTransform,i.style.padding=n.padding)}document.body.appendChild(i),e&&i.offsetWidth!==a.offsetWidth&&(t=i.offsetWidth+4),document.body.removeChild(i)}return t+'px'},e.sortByAlpha=function(a,e){var t=(a.label||a.value).toLowerCase(),i=(e.label||e.value).toLowerCase();return t<i?-1:t>i?1:0},e.sortByScore=function(n,e){return n.score-e.score},e.triggerEvent=function(a,e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,o=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0});return a.dispatchEvent(o)}},function(){'use strict';!function(){function t(n,a){a=a||{bubbles:!1,cancelable:!1,detail:void 0};var t=document.createEvent('CustomEvent');return t.initCustomEvent(n,a.bubbles,a.cancelable,a.detail),t}Array.from||(Array.from=function(){var n=Object.prototype.toString,e=function(e){return'function'==typeof e||'[object Function]'===n.call(e)},o=function(n){var i=+n;return isNaN(i)?0:0!=i&&isFinite(i)?(0<i?1:-1)*d(a(i)):i},t=function(n){var e=o(n);return b(c(e,0),9007199254740991)};return function(s){var d=this,i=Object(s);if(null==s)throw new TypeError('Array.from requires an array-like object - not null or undefined');var n,u=1<arguments.length?arguments[1]:void 0;if('undefined'!=typeof u){if(!e(u))throw new TypeError('Array.from: when provided, the second argument must be a function');2<arguments.length&&(n=arguments[2])}for(var p,a=t(i.length),c=e(d)?Object(new d(a)):Array(a),l=0;l<a;)p=i[l],c[l]=u?'undefined'==typeof n?u(p,l):u.call(n,p,l):p,l+=1;return c.length=a,c}}()),Array.prototype.find||(Array.prototype.find=function(a){if(null==this)throw new TypeError('Array.prototype.find called on null or undefined');if('function'!=typeof a)throw new TypeError('predicate must be a function');for(var l,t=Object(this),i=t.length>>>0,n=arguments[1],s=0;s<i;s++)if(l=t[s],a.call(n,l,s,t))return l}),t.prototype=window.Event.prototype,window.CustomEvent=t}()}])})},function(){},function(){},,function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var a=n(0),i=n.n(a);((e)=>{(document.attachEvent?'complete'===document.readyState:'loading'!==document.readyState)?e():document.addEventListener('DOMContentLoaded',e)})(()=>{async function e(e){k().then(()=>{A(e.tab),a.setValueByChoice(e.attacker+''),d.setValueByChoice(e.defender+''),o.value=e.attacker_level,r.value=e.attacker_atk_iv,p.value=e.weather_condition,h.value=e.friendship_boost,g.value=e.defender_cpm,w(e.attacker,'attacker'),w(e.defender,'defender'),T=e,T.staleTab=!0,T.status=t.READY,M()})}const t={SUBMITTING:'submitting',READY:'ready',ERROR:'error'},n={BREAKPOINTS:'breakpoints',COUNTERS:'counters'},a=new i.a('.breakpoint-calc-select-attacker',{searchPlaceholderValue:'Type in the attacker\'s name',searchResultLimit:5,itemSelectText:''}),o=document.getElementById('breakpoint-calc-input-attacker-level'),s=document.getElementById('breakpoint-calc-select-quick-move'),l=document.getElementById('breakpoint-calc-select-cinematic-move'),r=document.getElementById('breakpoint-calc-select-attacker-atk-iv'),d=new i.a('.breakpoint-calc-select-defender',{searchPlaceholderValue:'Type in the defender\'s name',searchResultLimit:5,itemSelectText:''}),c=document.getElementById('breakpoint-calc-select-defender-quick-move'),u=document.getElementById('breakpoint-calc-select-defender-cinematic-move'),p=document.getElementById('breakpoint-calc-select-weather-condition'),h=document.getElementById('breakpoint-calc-select-friendship-boost'),g=document.getElementById('breakpoint-calc-select-defender-tier'),m=document.getElementById('breakpoint-calc-move-effectiveness'),v=document.getElementById('breakpoint-calc-breakpoint-details-table'),f=document.getElementById('breakpoint-calc-toggle-cinematic-breakpoints'),b=document.getElementById('breakpoint-calc-breakpoints'),y=document.getElementById('breakpoint-calc-top-counters'),E=document.getElementById('breakpoint-calc-breakpoints-table'),_=document.getElementById('breakpoint-calc-top-counters-table'),S=document.getElementById('breakpoint-calc-atk-iv-assessment'),I=document.getElementById('faq-legend-content');let T={attacker:a.value,attacker_level:o.value,attacker_quick_move:s.value,attacker_cinematic_move:l.value,attacker_atk_iv:r.value,weather_condition:p.value,friendship_boost:h.value,defender:d.value,defender_quick_move:c.value,defender_cinematic_move:u.value,defender_cpm:g.value,tab:n.BREAKPOINTS,status:t.READY,staleTab:!1};a.passedElement.addEventListener('change',(e)=>{V('attacker'),w(e.currentTarget.value,'attacker'),G('breakpoint-calc-select-attacker'),T.attacker=e.currentTarget.value,T.staleTab=!0,M()}),o.addEventListener('change',(e)=>{q(e.currentTarget,'attacker_level'),o.classList.remove('error'),T.staleTab=!0,M().then(()=>o.focus())}),s.addEventListener('change',(e)=>{T.attacker_quick_move=e.currentTarget.value,T.staleTab=!0,M().then(()=>s.focus())}),l.addEventListener('change',(e)=>{T.attacker_cinematic_move=e.currentTarget.value,T.staleTab=!0,M().then(()=>l.focus())}),r.addEventListener('change',(e)=>{T.attacker_atk_iv=e.currentTarget.value,T.staleTab=!0,M().then(()=>r.focus())}),p.addEventListener('change',(e)=>{T.weather_condition=e.currentTarget.value,T.staleTab=!0,M().then(()=>p.focus())}),h.addEventListener('change',(e)=>{T.friendship_boost=e.currentTarget.value,T.staleTab=!0,M().then(()=>h.focus())}),d.passedElement.addEventListener('change',(e)=>{V('defender'),w(e.currentTarget.value,'defender'),G('breakpoint-calc-select-defender'),T.defender=e.currentTarget.value,T.staleTab=!0,M()}),c.addEventListener('change',(e)=>{T.defender_quick_move=e.currentTarget.value,T.staleTab=!0,M().then(()=>c.focus())}),u.addEventListener('change',(e)=>{T.defender_cinematic_move=e.currentTarget.value,T.staleTab=!0,M().then(()=>u.focus())}),g.addEventListener('change',(e)=>{T.defender_cpm=e.currentTarget.value,V('defender'),w(T.defender,'defender'),T.staleTab=!0,M().then(()=>g.focus())}),f.addEventListener('click',(e)=>{e.preventDefault(),T.staleTab=!0,H()}),b.addEventListener('click',(e)=>{e.preventDefault(),T.tab=n.BREAKPOINTS,A(T.tab),O(n.BREAKPOINTS)}),y.addEventListener('click',(e)=>{e.preventDefault(),T.tab=n.COUNTERS,A(T.tab),O(n.COUNTERS),T.staleTab&&(T.staleTab=!1,M())}),document.getElementById('faq-legend-link').addEventListener('click',(e)=>{e.preventDefault(),I.hidden=!I.hidden;const t=e.currentTarget.getElementsByClassName('faq-legend-chevron');for(var n=0;n<t.length;n++)t[n].classList.contains('glyphicon-chevron-down')?(t[n].classList.remove('glyphicon-chevron-down'),t[n].classList.add('glyphicon-chevron-up')):(t[n].classList.remove('glyphicon-chevron-up'),t[n].classList.add('glyphicon-chevron-down'))});const k=()=>new Promise((e)=>{T.status!==t.SUBMITTING&&(T.status=t.SUBMITTING,x(),a.ajax((n)=>{fetch(window.pgoAPIURLs['simple-pokemon-list']).then((i)=>{i.json().then((e)=>{n(e,'value','label')}).then(()=>{d.setChoices(a.currentState.choices.slice(1),'value','label',!1),T.status=t.READY,x(),e()})}).catch(()=>{T.status=t.ERROR,j(),e()})}))}),C=(e)=>{window.history.pushState({},null,'/breakpoint-calc/'+e)},L=(e)=>{const t=Object.assign({},e);return delete t.status,delete t.staleTab,'?'+Object.keys(t).map((e)=>e+'='+encodeURIComponent(t[e])).join('&')},A=(e)=>{e===n.BREAKPOINTS?(E.hidden=!1,_.hidden=!0,b.classList.add('breakpoint-calc-selected-tab'),y.classList.remove('breakpoint-calc-selected-tab'),C(L(T))):e===n.COUNTERS&&(E.hidden=!0,_.hidden=!1,y.classList.add('breakpoint-calc-selected-tab'),b.classList.remove('breakpoint-calc-selected-tab'),C(L(T)))},O=(e)=>{e===n.COUNTERS?(a.disable(),s.disabled=!0,l.disabled=!0,S.hidden=!0):(a.enable(),s.disabled=!1,l.disabled=!1,S.hidden=!1)},w=(e,n)=>{if(0<parseInt(e)){const a=new XMLHttpRequest,i='defender'===n&&'0'!==g.value.slice(-1);a.open('GET',`${window.pgoAPIURLs['move-list']}?pokemon-id=${e}&exclude-legacy=${i}`,!0),a.onload=()=>{if(200<=a.status&&400>a.status){const e=JSON.parse(a.responseText);N(e,n)}else j()},a.onerror=()=>{T.status=t.ERROR,j()},a.send()}else s.disabled=!0,l.disabled=!0,c.disabled=!0,u.disabled=!0,V('attacker'),V('defender')},x=()=>{const e=T.status===t.SUBMITTING,n='breakpoints'===T.tab;e?(a.disable(),d.disable()):(n&&a.enable(),d.enable()),o.disabled=e,r.disabled=e,c.disabled=e,u.disabled=e,p.disabled=e,h.disabled=e,g.disabled=e,b.disabled=e,y.disabled=e,s.disabled=e||0>s.value||!n,l.disabled=e||0>l.value||!n},M=()=>{if(T.status!==t.SUBMITTING){let e=!0;for(const t in T)(void 0===T[t]||-1===T[t])&&(e=!1);if(e)return new Promise((e)=>{if(T.status!==t.SUBMITTING){T.status=t.SUBMITTING,x();const a=new XMLHttpRequest,i=L(T),o=window.pgoAPIURLs['breakpoint-calc']+i;a.open('GET',o,!0),a.onload=()=>{if(500<=a.status)j();else{const o=JSON.parse(a.responseText);200<=a.status&&400>a.status?(m.innerHTML='',S.innerHTML=o.attack_iv_assessment,D(o),F(o.top_counters),C(i)):j(o),T.status=t.READY,T.tab===n.COUNTERS&&(T.staleTab=!1,O(n.COUNTERS)),x(),e()}},a.onerror=()=>{T.status=t.ERROR,j(),e()},a.send()}})}};if(T.attacker&&!(T.attacker_quick_move&&T.attacker_cinematic_move)){const t={};location.search.substr(1).split('&').forEach((e)=>{t[e.split('=')[0]]=e.split('=')[1]}),e(t)}else 0<Object.keys(initialData).length&&e(initialData);const N=(e,t)=>{const n='attacker'===t?s:c,a='attacker'===t?l:u,i=t+'_quick_move',o=t+'_cinematic_move',r=parseInt(T[i]),d=parseInt(T[o]);e.forEach((e)=>{const s=e.move;'QK'===s.category?(n.disabled=!1,n.options.add(B(s,r,i,t))):(a.disabled=!1,a.options.add(B(s,d,o,t)))}),T[i]=n.value,T[o]=a.value,M()},B=(e,t,n,a)=>new Option('attacker'===a?e.name+' ('+e.power+')':e.name,e.id,!1,P(t,e,n)),P=(e,t,n)=>!!(0<e&&e===t.id)&&(T[n]=t.id,!0),D=(e)=>{v.hidden=!1,f.enabled=!(2>e.breakpoint_details.length),R(e.breakpoint_details)},R=(e)=>{const t=document.getElementById('breakpoint-calc-breakpoint-details-table-body');t.innerHTML='';for(let n=0;n<e.length;n++){const a=document.createElement('tr');for(let t=0;t<e[n].length;t++){const i=document.createElement('td');i.innerHTML=e[n][t],a.appendChild(i)}t.appendChild(a)}},F=(e)=>{const t=document.getElementById('top-counters-table-attacker-stats');t.innerHTML=`L${T.attacker_level} ${T.attacker_atk_iv}ATK`;const n=document.getElementById('breakpoint-calc-top-counters-table-body');let a,o,s;n.innerHTML='';for(const[t,l]of Object.entries(e))for(let e=0;e<l[1].length;e++){a=document.createElement('tr'),o=document.createElement('td'),s=document.createElement('a'),s.href=`${l[0]}`,o.innerHTML=l[0],a.appendChild(o);for(let t=0;t<l[1][e].length-1;t++)o=document.createElement('td'),o.innerHTML=l[1][e][t],t<l[1][e].length-1&&a.appendChild(o);let r=t.toLowerCase();if(0<e)r='toggle_'+r+' breakpoint-calc-top-counter-subrow',a.hidden=!0;else{const e=document.createElement('span');e.setAttribute('class','glyphicon glyphicon-chevron-down breakpoint-calc-top-counter-chevron'),e.setAttribute('aria-hidden',!0),s=document.createElement('a'),s.setAttribute('class','breakpoint-calc-toggle-chevron'),s.onclick=()=>{e.classList.contains('glyphicon-chevron-down')?(e.classList.remove('glyphicon-chevron-down'),e.classList.add('glyphicon-chevron-up')):(e.classList.remove('glyphicon-chevron-up'),e.classList.add('glyphicon-chevron-down'));const t=document.getElementsByClassName('toggle_'+r);for(var n=0;n<t.length;n++)t[n].hidden=!t[n].hidden},s.appendChild(e),o.appendChild(s)}a.appendChild(o),a.setAttribute('class',r),n.appendChild(a)}},H=()=>{T.show_cinematic_breakpoints?delete T.show_cinematic_breakpoints:T.show_cinematic_breakpoints=!0,M()},j=(e=null)=>{if(e){for(let t in e)if('attacker_level'!==t){const e=document.querySelector('.breakpoint-calc-select-'+t);e&&e.parentElement.parentElement.classList.add('error')}else document.querySelector('.'+t).classList.add('error');}else v.hidden=!1,v.classList.add('error-text'),v.innerHTML=':( something broke, let me know if refreshing the page does not help.'},G=(e)=>{const t=document.getElementsByClassName(e)[0];t.parentElement.parentElement.classList.remove('error')},V=(e)=>{if(T.status!==t.SUBMITTING){const t='attacker'===e?s:c,n='attacker'===e?l:u;t.innerHTML='',t.append('<option value="-1" disabled selected>Select quick move</option>'),n.innerHTML='',n.append('<option value="-1" disabled selected>Select cinematic move</option>'),T[e+'_quick_move']=-1,T[e+'_cinematic_move']=-1}},q=(e,t)=>{const n=U(e);isNaN(n)?T[t]='-1':(e.value=n,T[t]=e.value)},U=(e)=>{const t=e.value.replace(',','.');let n=parseFloat(t);return 0>n&&(n*=-1),1>n&&(n=1),40<n&&(n=40),0!=10*n%5&&(n=parseInt(n)),n};k()})},,,function(e,t,n){n(0),n(2),n(4),n(1)}]);